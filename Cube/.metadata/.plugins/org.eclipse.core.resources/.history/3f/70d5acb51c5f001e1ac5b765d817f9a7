/*
 * traffic_light.c
 *
 *  Created on: Sep 29, 2023
 *      Author: Amyra Nguyen
 */

#include "traffic_light.h"
void init_traffic_light(){
	light_color[SIDE_A][GREEN_LIGHT] = (GPIO_config){GREEN_A_GPIO_Port, GREEN_A_Pin};
	light_color[SIDE_A][YELLOW_LIGHT] = (GPIO_config){LED_YELLOW_GPIO_Port, LED_YELLOW_Pin};
	light_color[SIDE_A][RED_LIGHT] = (GPIO_config){LED_RED_GPIO_Port, LED_RED_Pin};
	turn_all_light_off();

	traffic_light = (int*){RED_LIGHT, GREEN_LIGHT};
	traffic_timer = (int*){RED_TIMER - 1, GREEN_TIMER - 1};
	traffic_light_change = (int*){NO_CHANGED, NO_CHANGED};
}
void turn_light_off(int side, int color){
	set_GPIO_on(&light_color[side][color]);
}
void turn_light_on(int side, int color){
	set_GPIO_off(&light_color[side][color]);
}
void turn_all_light_off(){
	for(int side = 0; side < NUM_SIDE; side++){
		for(int color = 0; color < NUM_COLOR; color++){
			turn_light_off(side, color);
		}
	}
}
void run_traffic_light(int side, int color){
	for(int i = 0; i < NUM_COLOR; i++){
		if(i == color){
			turn_light_on(side, i);
			continue;
		}
		turn_light_off(side, i);
	}
}
